<!DOCTYPE html>
<hmtl >
	<head>
		<meta charset="utf-8">	
		<title>options</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="./lib/leaflet.css"/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" />
        <link rel="stylesheet" href="https://cdn.rawgit.com/socib/Leaflet.TimeDimension/master/dist/leaflet.timedimension.control.min.css" />
		<script src="./lib/leaflet.js"></script>
		<script src="./src/src.js"></script>
		<!--<script src="./dist/leaflet.migrationLayer.js"></script>-->
		<script src="./dist/migrationlayerpretrify.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js"></script>
        <script type="text/javascript" src="https://cdn.rawgit.com/nezasa/iso8601-js-period/master/iso8601.min.js"></script>
        <script type="text/javascript" src="https://cdn.rawgit.com/socib/Leaflet.TimeDimension/master/dist/leaflet.timedimension.min.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
		<style>
		
			html, body {
				margin:0px; padding:0px
			}
		
			.container {
				display:block;
			}
			
			#checkbox {
				position:fixed;
				top:150px;
				right:40%;
				width: 300px;
    			padding: 12px 20px;
				margin: 8px 0;
				display: block;
				border: 1px solid #ccc;
				border-radius: 4px;
				box-sizing: border-box;
				font-family:sans-serif;
				visibility:hidden;
				z-index:100;
				background:white;
			}
			
			#top-title {
				display:block;
				color:#FFF;
				background: linear-gradient(60deg, #5F1626 0%, #A21A3E 100%);
				height: 100px;
				box-shadow: 0px 4px 6px -6px #000;
				font-size:30px;
				text-align: center;
			}
			
			#footer-title {
   				position: fixed;
    			height: 80px;
    			margin-top: 1em;
				bottom: 0;
				right: 0;
				left: 0;
				background: linear-gradient(60deg, #5F1626 0%, #A21A3E 100%);
			}	
			
			#map {
				height:860px;
				width:100%;
				z-index:1;
			}
			
			span {
			 	font-family:sans-serif;
			}
			
			#userControl {
				color:#FFF;
				height: 80px;
				text-align: center;
				background: linear-gradient(60deg, #5F1626 0%, #A21A3E 100%);
				display: block;
			}
			
			input[type=text] {
    			width: 300px;
    			padding: 12px 20px;
				margin: 8px 0;
				display: inline-block;
				border: 1px solid #ccc;
				border-radius: 4px;
				box-sizing: border-box;
				text-align: center;
			}
			
			#userControl input[type=button] {
				width: 120px;
				background-color: #4CAF50;
				color: white;
				padding: 14px 20px;
				margin: 8px 0;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				
			}
			
			input[type=button]:hover {
				background-color: #45a049;
			}
			
			#output {
				background-color: lightblue;
				width: 320px;
				height: 240px;
				overflow: scroll;
			}
			
			
		</style>
	</head>
	<body>
		<!--Web App Header, made of: esa logo, esdc title, nrtsaa subtitle -->
		<div id="top-title">
			<span>ESA</span>
			<span>NRTSAA</span>
			<div id="calendar">	
				<input id="timeInput" type="text" name="datetimes" value=""></input>
				<p id="earliestDate"></p>
				<p id="latestDate"></p>			
			</div>		
		</div>
		<!--#######################################################################-->
		<div id="userControl">
			<input type="button" id="splunk" value="Call Splunkd"></input>
			<input type="button" value="setData" class="btn" onclick="setData()"></input>	
			<input type="button" class="hide" value="Select the Host(s):"><span></span></input>
		</div>
		<!--#######################################################################-->
			<div id="checkbox">
				<label class="container">Gaia</label>
		  		<input type="checkbox" name="host" value="gea03.n1data.lan"><!--checked="checked"-->				
				<label class="container">Esasky</label>
		  		<input type="checkbox" name="host" value="ammiapp02">
				<label class="container">Vospace</label>
		  		<input type="checkbox" name="host" value="vospace.n1data.lan">
		  		<label class="container">Lisa PathFinder</label>
		  		<input type="checkbox" name="host" value="lpfsa.n1data.lan">
		  		<label class="container">ISS-SolACES</label>
		  		<input type="checkbox" name="host" value="vospace.n1data.lan">
		  		<label class="container">PLA</label>
		  		<input type="checkbox" name="host" value="pla">
		  		<label class="container">SSA</label>
		  		<input type="checkbox" name="host" value="ssa.esac.esa.int">
			</div>
		<!--#######################################################################-

		--#######################################################################-->
		<div id="output"></div>
		<div id="map"></div>
		<div id="footer-title"></div>	
		
		<!--#################################
		######################################-->	
			
		<script>
			
			var dataParams = {earliest:"",latest:""};
				
			/******************************************************************/
			
			var start = moment().subtract(29, 'days');
			var end = moment();
			
			function writeDate(start,end)
			{
				$('#earliestDate').val(start.format('YYYY-MM-DD').toString()+"T"+start.format('hh:mm').toString()+":00.000");
				$('#latestDate').val(end.format('YYYY-MM-DD')+"T"+end.format('hh:mm')+":00.000");
				
				dataParams.earliest = $('#earliestDate').val();
				dataParams.latest = $('#latestDate').val();
				
				var count = 1;
				$('#checkbox input:checked').each(function()
				{
					
					var host = "host"+count.toString();
					dataParams[host] = $(this).attr('value');
					count++;
				});
	
			}
				
			$('input[name="datetimes"]').daterangepicker(
			{
				timePicker: true,
				minYear: 2018,
				startDate: moment().startOf('hour'),
				endDate: moment().startOf('hour').add(32, 'hour'),
				locale:
				{
					format: 'YY/MM/DD A'
				}
			},writeDate);
			writeDate(start,end);
			
			
			/**************************  Map Settings  ************************************/
			
			var geojson = {
	"type": "FeatureCollection",
	"features": [{
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [51.5333, 25.2867]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [5.8283, 50.9555]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [8.7, 49.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [8.7, 49.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [6.55, 53.2167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [9.9333, 51.5333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [126.9741, 37.5112]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [6.1457, 46.2022]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [37.6156, 55.7522]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.9305, 52.3463]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [9.05, 48.5333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-109.3315, 31.8682]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [138.5986, -34.9287]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [7.0167, 50.7333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [116.3883, 39.9289]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.5282, 52.1763]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-1.5667, 54.7667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-1.25, 51.75]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [8.5333, 52.0333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-122.0603, 36.9899]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-122.0603, 36.9899]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-122.0603, 36.9899]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-122.0603, 36.9899]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [34.7667, 32.0667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-77.8614, 40.8077]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-73.05, -36.8333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-0.1667, 51.7667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.8995, 52.3824]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [13.0667, 52.4]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [135.7556, 35.0214]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [13.0667, 52.4]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-16.3201, 28.4853]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [6.1457, 46.2022]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [21.0362, 52.2394]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [116.3883, 39.9289]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [7.1, 50.7333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-76.7118, 38.9268]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [151.2055, -33.8615]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-2.6664, 43.359]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-122.2536, 37.8668]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [151.2055, -33.8615]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [2.3333, 48.8667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [0.1667, 51.7833]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-1.55, 52.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [14.5144, 46.0553]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [121.5318, 25.0478]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-2.2167, 53.5]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-77.9021, 40.7975]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [37.6068, 55.7386]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [7.2595, 43.7136]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [20.6403, 44.8708]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [17.6333, 59.85]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [13.1833, 55.7]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-0.1667, 51.7667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [13.1833, 55.7]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [2.3333, 48.8667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [21, 52.25]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [116.3883, 39.9289]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-3.684, 40.4172]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-118.7843, 34.2521]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [5.7167, 45.1667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [2.3387, 48.8582]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.8833, 45.7667]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [136.8667, 35.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-83.375, 33.9499]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-3, 53.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-118.1223, 34.1695]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-110.95, 32.2338]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [6.55, 53.2167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [18.6048, 53.0358]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [18.6048, 53.0358]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [11.5833, 50.9333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [13.1833, 55.7]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-110.95, 32.2338]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [139.69, 35.69]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [139.69, 35.69]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [39.2192, 21.5169]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [11.8833, 45.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [12.1097, 43.1479]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-75.3823, 39.8489]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-43.2192, -22.8305]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [83.76, 53.36]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.3333, 50.8333]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [8.7, 49.4167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-35.2107, -5.8002]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-80.2072, 26.7063]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [116.3883, 39.9289]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [6.55, 53.2167]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [116.3883, 39.9289]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [22.2833, 60.45]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-74.0733, 4.6357]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-3.684, 40.4172]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [130.5581, 31.5602]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-118.373, 34.1683]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [139.69, 35.69]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [20.9952, 52.1927]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-89.3758, 43.0796]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [-79.3716, 43.6319]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [4.8995, 52.3824]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}, {
		"type": "Feature",
		"geometry": {
			"type": "Point",
			"coordinates": [9.8442, 49.8597]
		},
		"properties": {
			"host": "gea03.n1data.lan",
			"time": 1528102799000
		}
	}]
};
			
			L.TimeDimension.Layer.GeoJson.GeometryCollection = L.TimeDimension.Layer.GeoJson.extend({

				// Do not modify features. Just return the feature if it intersects
				// the time interval    
				_getFeatureBetweenDates: function(feature, minTime, maxTime) {
					var featureStringTimes = this._getFeatureTimes(feature);
					if (featureStringTimes.length == 0) {
						return feature;
					}
					var featureTimes = [];
					for (var i = 0, l = featureStringTimes.length; i < l; i++) {
						var time = featureStringTimes[i]
						if (typeof time == 'string' || time instanceof String) {
						    time = Date.parse(time.trim());
						}
						featureTimes.push(time);
					}

					if (featureTimes[0] > maxTime || featureTimes[l - 1] < minTime) {
						return null;
					}
					return feature;
				},

			});

			L.timeDimension.layer.geoJson.geometryCollection = function(layer, options) {
				return new L.TimeDimension.Layer.GeoJson.GeometryCollection(layer, options);
			};

			
			var baseMapDark = L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png", {attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, '+'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, '+'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>'});
				
			var osmLayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});
			
			
			var blackAndWhite = L.tileLayer('http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png');

							
			/*  
				Global variable for our map. 
				setView allows us to focus on Madrid (lat,lng)
				with a specific zoom level 
			*/
				
			var map = L.map('map', {
				zoom: 2,
				fullscreenControl: true,
				timeDimensionControl: true,
				timeDimensionControlOptions: {
					loopButton: true,
				},
				timeDimension: true,
				center: [0, 0]
			});

			var baseMaps = {
				"OSM": osmLayer,
				"CARTO-Dark": baseMapDark,
				"Black and Whilte": blackAndWhite
			};		
			
			L.control.layers(baseMaps).addTo(map);
			
			var geoJsonLayer = L.geoJson(geojson, {
			  style: function(feature) {    
				return {
				  "color": "#FF0000",
				  "weight": 2,
				  "opacity": 0.4
				};
			  }
			});
			
			var geoJsonTimeLayer = L.timeDimension.layer.geoJson.geometryCollection(geoJsonLayer, {
			  updateTimeDimension: true,
			  updateTimeDimensionMode: 'replace',  
			  duration: 'PT30M',
			});
			geoJsonTimeLayer.addTo(map);
			
			
			
			/*****************************************************************

			var data = [{"from":[-4.10,40.10],"to":[-4.0,40.0],"labels":[null,null],"color":"#106090"}];
			
			var migrationLayer = new L.migrationLayer(
			{
				map: map,
				data: data,
				pulseRadius:6,
				pulseBorderWidth:3,
				arcWidth:1,
				arcLabel:false,
				arcLabelFont:'10px sans-serif',
			});
			
			function setData()
			{ 
				migrationLayer.setData(data3);
				data3 = data
			}
			
				
			
			
			
			var dataStr;
			var data3 = [];
			function getParams() 
			{
				dataParams.earliest = document.getElementById('eT').value;
				dataParams.latest = document.getElementById('lT').value;
				$('#checkbox input:checked').each(function()
				{
					dataParams.host.push($(this).attr('value'));
				});
				
				console.log(dataParams);
				dataStr = JSON.stringify(dataParams);
				console.log(dataStr);
			}
			
			var subButton = document.getElementById('subButton');
			subButton.addEventListener('click', getParams, false);
			
			*****************************************************************/
			
			$(".hide").click(function()
			{
				//$("#checkbox").slideToggle("slow");
				$("#checkbox").css("visibility")==="hidden"?
				$("#checkbox").css({"visibility":"visible"}) : $("#checkbox").css({"visibility":"hidden"});			
			});		
			

			
			/********************  AJAX REQUEST  ****************************/
			/*host=gea03.n1data.lan 
			| convert mstime(_time) AS ms_time
			| eval ms_time = ms_time * 1000
			| table ms_time*/
			$("#splunk").click(function()
			{
				$.ajax(
				{
					url:"http://172.25.3.155:8123",
					dataType: "text",
					data: dataParams,
					success: function(data)
					{
						geojson = JSON.parse(data);
												
					}
					
				});
				/*$("#output").html(geojson.toString());*/
				$("#output").html(JSON.stringify(geojson));
			});
			
			
		</script>
	</body>
</html>
